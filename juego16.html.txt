juego.html
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mundo 3D Completo con Skins e Inventario</title>
<style>
body { margin:0; overflow:hidden; }
#info { position:absolute; top:10px; left:10px; color:white; background:rgba(0,0,0,0.6); padding:10px; font-family:Arial; }
#inventario { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); display:flex; gap:5px; background:rgba(0,0,0,0.5); padding:10px; border-radius:5px; }
.item { width:50px; height:50px; border:2px solid white; display:flex; align-items:center; justify-content:center; font-size:12px; color:white; font-family:Arial; background:rgba(0,0,0,0.3); cursor:pointer; }
.seleccionado { border:2px solid yellow; }
#botones { position:absolute; top:50px; left:10px; display:flex; flex-direction:column; gap:5px; }
button { padding:5px; cursor:pointer; }
</style>
</head>
<body>
<div id="info">WASD = mover | Espacio = saltar | Click derecho = colocar bloque</div>

<div id="inventario">
  <div class="item seleccionado" data-item="espada">Espada游눑</div>
  <div class="item" data-item="bloqueDiamante">Bloque游눑</div>
  <div class="item" data-item="puerta">Puerta游뿻</div>
  <div class="item" data-item="bloqueMadera">Bloque游뿻</div>
</div>

<div id="botones">
  <button data-skin="noob">Skin Noob Roblox</button>
  <button data-skin="dandy">Skin Dandy</button>
  <button data-skin="banano">Skin Banano</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
// ===== ESCENA Y C츼MARA =====
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
camera.position.set(0,6,12);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ===== LUCES =====
const luzDir = new THREE.DirectionalLight(0xffffff,1);
luzDir.position.set(5,10,5);
scene.add(luzDir);
scene.add(new THREE.AmbientLight(0xffffff,0.5));

// ===== SUELO INFINITO =====
const tama침oSuelo = 100;
const cespedGeo = new THREE.PlaneGeometry(tama침oSuelo, tama침oSuelo);
const cespedMat = new THREE.MeshLambertMaterial({color:0x2ecc71});
const suelos = [];
for(let x=-1;x<=1;x++){
  for(let z=-1;z<=1;z++){
    const mesh = new THREE.Mesh(cespedGeo, cespedMat);
    mesh.rotation.x = -Math.PI/2;
    mesh.position.set(x*tama침oSuelo,0,z*tama침oSuelo);
    scene.add(mesh);
    suelos.push(mesh);
  }
}
function actualizarSuelo(){
  const px = Math.floor(player.position.x / tama침oSuelo);
  const pz = Math.floor(player.position.z / tama침oSuelo);
  let i=0;
  for(let dx=-1;dx<=1;dx++){
    for(let dz=-1;dz<=1;dz++){
      suelos[i].position.x = (px+dx)*tama침oSuelo;
      suelos[i].position.z = (pz+dz)*tama침oSuelo;
      i++;
    }
  }
}

// ===== ARBOLES =====
const arboles=[];
function crearArbol(x,z){
  const arbol = new THREE.Group();
  const tronco = new THREE.Mesh(new THREE.CylinderGeometry(0.3,0.4,3,8), new THREE.MeshLambertMaterial({color:0x8b4513}));
  tronco.position.y=1.5; arbol.add(tronco);
  const hojas = new THREE.Mesh(new THREE.SphereGeometry(1.5,8,8), new THREE.MeshLambertMaterial({color:0x228b22}));
  hojas.position.y=3.5; arbol.add(hojas);
  arbol.position.set(x,0,z);
  scene.add(arbol); arboles.push(arbol);
}

// ===== CASAS =====
const casas=[];
function crearCasa(x,z){
  const c=new THREE.Group();
  const base=new THREE.Mesh(new THREE.BoxGeometry(3,2,3),new THREE.MeshLambertMaterial({color:0xa0522d}));
  base.position.y=1; c.add(base);
  const techo=new THREE.Mesh(new THREE.ConeGeometry(2.2,2,4),new THREE.MeshLambertMaterial({color:0x8b0000}));
  techo.position.y=3; c.add(techo);
  c.position.set(x,0,z);
  scene.add(c); casas.push(c);
}

// ===== ALDEANOS =====
const aldeanos=[];
function crearAldeano(x,z,color=0x3498db){
  const a = new THREE.Group();
  const torsoMat = new THREE.MeshLambertMaterial({color});
  const cuerpo = new THREE.Mesh(new THREE.BoxGeometry(1,1.5,0.5), torsoMat); cuerpo.position.y=1.25; a.add(cuerpo);
  const cabeza = new THREE.Mesh(new THREE.BoxGeometry(0.8,0.8,0.8), new THREE.MeshLambertMaterial({color:0xffcc99})); cabeza.position.y=2.3; a.add(cabeza);
  const brazoIzq = new THREE.Mesh(new THREE.BoxGeometry(0.3,1,0.3), torsoMat); brazoIzq.position.set(-0.65,1.25,0); a.add(brazoIzq);
  const brazoDer = new THREE.Mesh(new THREE.BoxGeometry(0.3,1,0.3), torsoMat); brazoDer.position.set(0.65,1.25,0); a.add(brazoDer);
  const piernaIzq = new THREE.Mesh(new THREE.BoxGeometry(0.4,1,0.4), new THREE.MeshLambertMaterial({color})); piernaIzq.position.set(-0.25,0.5,0); a.add(piernaIzq);
  const piernaDer = new THREE.Mesh(new THREE.BoxGeometry(0.4,1,0.4), new THREE.MeshLambertMaterial({color})); piernaDer.position.set(0.25,0.5,0); a.add(piernaDer);
  a.position.set(x,0,z);
  a.userData.dir=(Math.random()-0.5)*Math.PI*2;
  scene.add(a); aldeanos.push(a);
}

// ===== ANIMALES =====
const animales=[];
function crearAnimal(tipo,x,z){
  const animal = new THREE.Group();
  let color, altura;
  switch(tipo){
    case"pollo": color=0xffffff; altura=0.5; break;
    case"vaca": color=0x8b4513; altura=1; break;
    case"oveja": color=0xffffff; altura=0.8; break;
    case"zorro": color=0xff4500; altura=0.6; break;
  }
  const cuerpo=new THREE.Mesh(new THREE.SphereGeometry(altura,8,8),new THREE.MeshLambertMaterial({color}));
  cuerpo.position.y=altura; animal.add(cuerpo);
  const cabeza=new THREE.Mesh(new THREE.SphereGeometry(altura/2,8,8),new THREE.MeshLambertMaterial({color}));
  cabeza.position.set(0,altura*1.5,altura/2); animal.add(cabeza);
  for(let dx=-0.2;dx<=0.2;dx+=0.4){
    for(let dz=-0.2;dz<=0.2;dz+=0.4){
      const pata=new THREE.Mesh(new THREE.CylinderGeometry(0.05,0.05,altura/2,6),new THREE.MeshLambertMaterial({color:0x333333}));
      pata.position.set(dx,altura/4,dz); animal.add(pata);
    }
  }
  animal.position.set(x,0,z);
  animal.userData.dir=(Math.random()-0.5)*Math.PI*2;
  scene.add(animal); animales.push(animal);
}

// ===== PLAYER =====
const player = new THREE.Group();
scene.add(player);

// ===== FUNCIONES DE SKIN =====
function crearJugadorCalvo(){
  player.clear();
  const torsoMat = new THREE.MeshLambertMaterial({color:0x0000ff});
  const piernaMat = new THREE.MeshLambertMaterial({color:0x0000ff});
  const cuerpo = new THREE.Mesh(new THREE.BoxGeometry(1,1.5,0.5), torsoMat); cuerpo.position.y=1.25; player.add(cuerpo);
  const cabeza = new THREE.Mesh(new THREE.BoxGeometry(0.8,0.8,0.8), new THREE.MeshLambertMaterial({color:0xffcc99})); cabeza.position.y=2.3; player.add(cabeza);
  const pelo = new THREE.Mesh(new THREE.BoxGeometry(0.8,0.2,0.8), new THREE.MeshLambertMaterial({color:0x000000})); pelo.position.y=2.7; player.add(pelo);
  const brazoIzq = new THREE.Mesh(new THREE.BoxGeometry(0.3,1,0.3), torsoMat); brazoIzq.position.set(-0.65,1.25,0); player.add(brazoIzq);
  const brazoDer = new THREE.Mesh(new THREE.BoxGeometry(0.3,1,0.3), torsoMat); brazoDer.position.set(0.65,1.25,0); player.add(brazoDer);
  const piernaIzq = new THREE.Mesh(new THREE.BoxGeometry(0.4,1,0.4), piernaMat); piernaIzq.position.set(-0.25,0.5,0); player.add(piernaIzq);
  const piernaDer = new THREE.Mesh(new THREE.BoxGeometry(0.4,1,0.4), piernaMat); piernaDer.position.set(0.25,0.5,0); player.add(piernaDer);
}
crearJugadorCalvo();

function cambiarSkin(skin){
  player.clear();
  let torsoMat,piernaMat,cabezaColor;
  if(skin==="noob"){ torsoMat=new THREE.MeshLambertMaterial({color:0x0000ff}); piernaMat=new THREE.MeshLambertMaterial({color:0x00ff00}); cabezaColor=0xffff00; }
  else if(skin==="dandy"){ 
    torsoMat=new THREE.MeshLambertMaterial({color:0xff00ff}); piernaMat=new THREE.MeshLambertMaterial({color:0xff00ff}); cabezaColor=0xffcc00;
    // Agregar p칠talos
    const petaloGeo = new THREE.SphereGeometry(0.1,6,6);
    const petaloMat = new THREE.MeshLambertMaterial({color:0xff69b4});
    for(let i=0;i<5;i++){
      const petalo = new THREE.Mesh(petaloGeo, petaloMat);
      petalo.position.set(Math.cos(i/5*Math.PI*2)*0.5+0, 2.6, Math.sin(i/5*Math.PI*2)*0.5);
      player.add(petalo);
    }
  }
  else if(skin==="banano"){ torsoMat=new THREE.MeshLambertMaterial({color:0xffff00}); piernaMat=new THREE.MeshLambertMaterial({color:0xffff00}); cabezaColor=0xffaa00; }
  const cuerpo = new THREE.Mesh(new THREE.BoxGeometry(1,1.5,0.5), torsoMat); cuerpo.position.y=1.25; player.add(cuerpo);
  const cabeza = new THREE.Mesh(new THREE.BoxGeometry(0.8,0.8,0.8), new THREE.MeshLambertMaterial({color:cabezaColor})); cabeza.position.y=2.3; player.add(cabeza);
  const brazoIzq = new THREE.Mesh(new THREE.BoxGeometry(0.3,1,0.3), torsoMat); brazoIzq.position.set(-0.65,1.25,0); player.add(brazoIzq);
  const brazoDer = new THREE.Mesh(new THREE.BoxGeometry(0.3,1,0.3), torsoMat); brazoDer.position.set(0.65,1.25,0); player.add(brazoDer);
  const piernaIzq = new THREE.Mesh(new THREE.BoxGeometry(0.4,1,0.4), piernaMat); piernaIzq.position.set(-0.25,0.5,0); player.add(piernaIzq);
  const piernaDer = new THREE.Mesh(new THREE.BoxGeometry(0.4,1,0.4), piernaMat); piernaDer.position.set(0.25,0.5,0); player.add(piernaDer);
}

// ===== BOTONES SKINS =====
document.querySelectorAll("#botones button").forEach(btn=>{
  btn.addEventListener("click",()=>{
    cambiarSkin(btn.dataset.skin);
  });
});

// ===== INVENTARIO =====
let itemSeleccionado="espada";
document.querySelectorAll(".item").forEach(div=>{
  div.addEventListener("click", ()=>{
    document.querySelectorAll(".item").forEach(i=>i.classList.remove("seleccionado"));
    div.classList.add("seleccionado");
    itemSeleccionado=div.dataset.item;
  });
});

// ===== COLOCAR BLOQUES =====
const raycaster = new THREE.Raycaster();
const mouse = new THREE.Vector2();
document.addEventListener("contextmenu", e=>{
  e.preventDefault();
  mouse.x = (e.clientX / window.innerWidth)*2-1;
  mouse.y = -(e.clientY / window.innerHeight)*2+1;
  raycaster.setFromCamera(mouse,camera);
  const intersects = raycaster.intersectObjects(suelos);
  if(intersects.length>0){
    const point = intersects[0].point;
    let color;
    if(itemSeleccionado==="bloqueDiamante") color=0x00ffff;
    else if(itemSeleccionado==="bloqueMadera") color=0x8b4513;
    else if(itemSeleccionado==="puerta") color=0xaa6633;
    else return;
    const bloque = new THREE.Mesh(new THREE.BoxGeometry(1,1,1), new THREE.MeshLambertMaterial({color}));
    bloque.position.set(Math.round(point.x),0.5,Math.round(point.z));
    scene.add(bloque);
  }
});

// ===== MOVIMIENTO JUGADOR =====
const teclas={};
let velocidad=0.18, salto=0.4, velocidadY=0, enSuelo=true, gravedad=0.02;
document.addEventListener("keydown",e=>teclas[e.key.toLowerCase()]=true);
document.addEventListener("keyup",e=>teclas[e.key.toLowerCase()]=false);

// ===== GENERAR MUNDO INICIAL =====
for(let i=0;i<20;i++){
  crearArbol(Math.floor(Math.random()*200-100),Math.floor(Math.random()*200-100));
  crearAnimal("pollo",Math.floor(Math.random()*200-100),Math.floor(Math.random()*200-100));
}
for(let i=0;i<5;i++){
  crearCasa(Math.floor(Math.random()*200-100),Math.floor(Math.random()*200-100));
  crearAldeano(Math.floor(Math.random()*200-100),Math.floor(Math.random()*200-100));
}

// ===== ANIMATE =====
function animate(){
  requestAnimationFrame(animate);

  // Movimiento player
  let dirX=0, dirZ=0;
  if(teclas["w"]) dirZ-=1;
  if(teclas["s"]) dirZ+=1;
  if(teclas["a"]) dirX-=1;
  if(teclas["d"]) dirX+=1;
  if(dirX!==0 || dirZ!==0){
    player.rotation.y=Math.atan2(dirX,dirZ);
    player.position.x+=Math.sin(player.rotation.y)*velocidad;
    player.position.z+=Math.cos(player.rotation.y)*velocidad;
  }
  if(teclas[" "] && enSuelo){ velocidadY=salto; enSuelo=false; }
  velocidadY-=gravedad;
  player.position.y+=velocidadY;
  if(player.position.y<=0){ player.position.y=0; velocidadY=0; enSuelo=true; }

  // Mover animales
  for(const animal of animales){
    animal.position.x += Math.sin(animal.userData.dir) * 0.05;
    animal.position.z += Math.cos(animal.userData.dir) * 0.05;
    if(Math.random()<0.01) animal.userData.dir = (Math.random()-0.5)*Math.PI*2;
  }

  // Mover aldeanos
  for(const aldeano of aldeanos){
    aldeano.position.x += Math.sin(aldeano.userData.dir) * 0.03;
    aldeano.position.z += Math.cos(aldeano.userData.dir) * 0.03;
    if(Math.random()<0.01) aldeano.userData.dir = (Math.random()-0.5)*Math.PI*2;
  }

  actualizarSuelo();
  camera.position.x=player.position.x;
  camera.position.z=player.position.z+12;
  camera.lookAt(player.position);

  renderer.render(scene,camera);
}
animate();

window.addEventListener("resize",()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
